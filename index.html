<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AuraLearn: Intelligent Learning Architect</title>
    <!-- Tailwind CSS CDN for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN for analytics charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Link to your custom CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="theme-light">
    <div id="app-container" class="flex h-screen">
        <!-- Sidebar Navigation -->
        <aside id="sidebar" class="w-64 bg-secondary border-r border-border-color flex-shrink-0 flex-col hidden md:flex">
            <div class="p-4 border-b border-border-color">
                <h1 class="text-2xl font-bold text-primary">AuraLearn</h1>
                <p class="text-xs text-secondary">Intelligent Learning Architect</p>
            </div>
            <nav class="flex-grow p-4">
                <ul class="space-y-2">
                    <li><a href="#" data-view="dashboard" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">üè†</span>Dashboard</a></li>
                    <li><a href="#" data-view="calendar" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">üìÖ</span>Calendar</a></li> <!-- New Calendar Link -->
                    <li><a href="#" data-view="library" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">üìö</span>Library</a></li>
                    <li><a href="#" data-view="ai-learning" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">‚ú®</span>AI Learning</a></li>
                    <li><a href="#" data-view="mind-map" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">üó∫Ô∏è</span>Mind Map</a></li>
                    <li><a href="#" data-view="glossary" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">üìñ</span>Glossary</a></li>
                    <li><a href="#" data-view="analytics" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">üìä</span>Analytics</a></li>
                    <li><a href="#" data-view="achievements" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">üèÖ</span>Achievements</a></li>
                    <li><a href="#" data-view="focus" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">üéß</span>Focus Tools</a></li>
                    <li><a href="#" data-view="learning-hub" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">üß†</span>Learning Hub</a></li>
                    <li><a href="#" data-view="settings" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">‚öôÔ∏è</span>Settings</a></li>
                    <li><a href="#" data-view="tutorial" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <span class="w-6 h-6 mr-3">üí°</span>Tutorial</a></li>
                </ul>
            </nav>
            <div class="p-4 border-t border-border-color">
                <div class="flex items-center">
                    <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold mr-3">U</div>
                    <div>
                        <p class="font-semibold text-primary" id="sidebar-username">User</p>
                        <a href="#" data-view="settings" class="nav-item text-sm text-accent-blue hover:underline">Settings</a>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Mobile Header -->
        <header class="md:hidden bg-secondary border-b border-border-color p-4 flex justify-between items-center w-full fixed top-0 z-20">
            <h1 class="text-xl font-bold text-primary">AuraLearn</h1>
            <button id="menu-button" class="p-2"><span class="text-2xl">‚ò∞</span></button>
        </header>

        <!-- Mobile Sidebar -->
        <div id="mobile-sidebar-container" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden md:hidden modal">
            <aside id="mobile-sidebar" class="w-64 bg-secondary h-full flex-shrink-0 flex-col flex transition-transform transform -translate-x-full">
                 <div class="p-4 border-b border-border-color flex justify-between items-center">
                    <div><h1 class="text-2xl font-bold text-primary">AuraLearn</h1><p class="text-xs text-secondary">Intelligent Learning Architect</p></div>
                    <button id="close-menu-button" class="p-2"><span class="text-2xl">&times;</span></button>
                </div>
                 <nav class="flex-grow p-4">
                    <ul class="space-y-2">
                        <li><a href="#" data-view="dashboard" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">üè†</span>Dashboard</a></li>
                        <li><a href="#" data-view="calendar" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">üìÖ</span>Calendar</a></li> <!-- New Mobile Calendar Link -->
                        <li><a href="#" data-view="library" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">üìö</span>Library</a></li>
                        <li><a href="#" data-view="ai-learning" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">‚ú®</span>AI Learning</a></li>
                        <li><a href="#" data-view="mind-map" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">üó∫Ô∏è</span>Mind Map</a></li>
                        <li><a href="#" data-view="glossary" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">üìñ</span>Glossary</a></li>
                        <li><a href="#" data-view="analytics" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">üìä</span>Analytics</a></li>
                        <li><a href="#" data-view="achievements" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">üèÖ</span>Achievements</a></li>
                        <li><a href="#" data-view="focus" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">üéß</span>Focus Tools</a></li>
                        <li><a href="#" data-view="learning-hub" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">üß†</span>Learning Hub</a></li>
                        <li><a href="#" data-view="settings" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">‚öôÔ∏è</span>Settings</a></li>
                        <li><a href="#" data-view="tutorial" class="nav-item flex items-center p-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <span class="w-6 h-6 mr-3">üí°</span>Tutorial</a></li>
                    </ul>
                </nav>
                <div class="p-4 border-t border-border-color">
                     <div class="flex items-center">
                        <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold mr-3">U</div>
                        <div>
                            <p class="font-semibold text-primary" id="sidebar-username-mobile">User</p>
                            <a href="#" data-view="settings" class="nav-item text-sm text-accent-blue hover:underline">Settings</a>
                        </div>
                    </div>
                </div>
            </aside>
        </div>

        <main class="flex-grow p-4 sm:p-6 lg:p-8 overflow-y-auto pt-20 md:pt-6">
            <div class="fixed top-4 right-4 z-40 md:static md:mb-6 md:flex md:justify-end">
                <input type="text" id="global-search-input" placeholder="Search atoms or learning hub..." class="p-2 border border-border-color rounded-lg shadow-sm w-48 md:w-64 bg-input-bg text-input-text focus:outline-none focus:ring-2 focus:ring-accent-blue">
            </div>

            <!-- Dashboard View -->
            <div id="view-dashboard" class="space-y-8">
                <div id="backup-reminder" class="bg-yellow-100 text-yellow-800 p-3 rounded-lg border border-yellow-200 text-center hidden">
                    <p class="text-sm">Don't forget to <a href="#" data-view="settings" class="font-semibold underline">export your data</a> regularly for backup!</p>
                </div>
                <div>
                    <h2 class="text-3xl font-bold text-primary">Welcome back, <span id="dashboard-username">User</span>!</h2>
                    <p class="text-secondary mt-1">Here's your learning snapshot for today, highlighting key progress and ready actions.</p>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                        <h3 class="text-sm font-medium text-secondary">Daily Learning Queue</h3>
                        <p class="text-3xl font-bold text-primary mt-2" id="daily-queue-count">0 Atoms</p>
                        <p class="text-xs text-secondary mt-1">Ready for optimal review</p>
                    </div>
                    <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                        <h3 class="text-sm font-medium text-secondary">Current Learning Streak</h3>
                        <p class="text-3xl font-bold text-primary mt-2" id="current-streak">üî• 0 Days</p>
                        <p class="text-xs text-secondary mt-1">Consistency builds mastery!</p>
                    </div>
                    <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                        <h3 class="text-sm font-medium text-secondary">Total Atoms Mastered</h3>
                        <p class="text-3xl font-bold text-primary mt-2" id="total-mastered-atoms">0</p>
                        <p class="text-xs text-secondary mt-1">Knowledge that sticks</p>
                    </div>
                    <!-- New: Upcoming Events Card -->
                    <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                        <h3 class="text-sm font-medium text-secondary">Upcoming Events (7 Days)</h3>
                        <p class="text-3xl font-bold text-primary mt-2" id="upcoming-events-count">0</p>
                        <p class="text-xs text-secondary mt-1">Assignments, exams & more</p>
                    </div>
                </div>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                    <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-4 gap-3">
                        <h3 class="text-xl font-bold text-primary">Today's Intelligent Review</h3>
                        <div class="flex flex-col sm:flex-row gap-2">
                             <button id="quick-add-atom-btn-dashboard" class="bg-accent-blue text-white text-sm font-semibold py-1.5 px-3 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                                + Quick Add Atom
                            </button>
                            <button id="study-weak-atoms-btn" class="bg-orange-500 text-white text-sm font-semibold py-1.5 px-3 rounded-lg hover:bg-orange-600 transition-all shadow-md">
                                Study Weak Atoms (0)
                            </button>
                        </div>
                    </div>
                    <p class="text-secondary mt-1">Your personalized, prioritized list based on AuraLearn's Spaced Repetition algorithm.</p>
                    <ul id="daily-queue-list" class="mt-4 space-y-3"></ul>
                    <button id="start-review-btn" class="mt-6 w-full bg-accent-blue text-white font-semibold py-3 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md hover:shadow-lg">
                        Start Daily Review (0 items)
                    </button>
                </div>

                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                    <h3 class="text-xl font-bold text-primary mb-4">Recommended for You</h3>
                    <p class="text-secondary mb-4">Based on your learning patterns, here are some atoms AuraLearn recommends you focus on next.</p>
                    <div id="recommended-atoms-list" class="space-y-3">
                        <p class="text-secondary text-center">No recommendations yet. Start importing content!</p>
                    </div>
                </div>

                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                    <h3 class="text-xl font-bold text-primary mb-4">Daily Challenge</h3>
                    <p class="text-secondary mb-4" id="daily-challenge-text">Review 5 atoms to complete today's challenge!</p>
                    <div class="w-full bg-border-color rounded-full h-2.5">
                        <div id="daily-challenge-progress" class="bg-green-500 h-2.5 rounded-full" style="width: 0%;"></div>
                    </div>
                    <p id="daily-challenge-status" class="text-secondary text-sm mt-2 text-center">0/5 Atoms Reviewed</p>
                    <button id="claim-challenge-btn" class="mt-4 w-full bg-green-600 text-white font-semibold py-2 rounded-lg hover:bg-green-700 transition-all hidden">Claim Reward!</button>
                </div>
            </div>

            <!-- Calendar View (New) -->
            <div id="view-calendar" class="hidden space-y-6">
                <div>
                    <h2 class="text-3xl font-bold text-primary">Learning Calendar</h2>
                    <p class="text-secondary mt-1">Organize your assignments, exams, and study sessions.</p>
                </div>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                    <div class="flex justify-between items-center mb-4">
                        <button id="prev-month-btn" class="p-2 rounded-lg hover:bg-border-color text-primary font-semibold">&lt; Prev</button>
                        <h3 id="current-month-year" class="text-xl font-bold text-primary"></h3>
                        <button id="next-month-btn" class="p-2 rounded-lg hover:bg-border-color text-primary font-semibold">Next &gt;</button>
                    </div>
                    <div class="grid grid-cols-7 gap-px text-center font-semibold text-sm text-secondary mb-2">
                        <span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
                    </div>
                    <div id="calendar-grid" class="grid grid-cols-7 gap-px calendar-grid-container">
                        <!-- Calendar days will be rendered here -->
                    </div>
                    <button id="add-event-btn" class="mt-6 w-full bg-accent-blue text-white font-semibold py-3 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                        + Add New Event
                    </button>
                    <div id="selected-day-events" class="mt-8 space-y-3">
                        <h4 class="text-xl font-bold text-primary mb-3">Events for <span id="selected-day-display">Today</span></h4>
                        <ul id="events-list-for-day" class="space-y-2">
                            <li class="text-secondary text-center">No events for this day.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Library View -->
            <div id="view-library" class="hidden space-y-6">
                <div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4">
                    <div>
                        <h2 class="text-3xl font-bold text-primary">Knowledge Library</h2>
                        <p class="text-secondary mt-1">Manage and expand your personal learning content. Import documents and let AuraLearn's AI help structure your knowledge.</p>
                    </div>
                    <div class="flex gap-2">
                        <button id="quick-add-atom-btn-library" class="bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            + Quick Add Atom
                        </button>
                    </div>
                </div>
                <div id="library-content" class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                     <h3 class="text-xl font-bold text-primary mb-4">Subjects (Flashcards)</h3>
                     <div id="subject-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>
                     <p id="empty-library-message" class="text-secondary text-center mt-8 hidden">
                        Your library is empty! Click "Quick Add Atom" or use the "AI Learning" section to add your first learning materials.
                    </p>
                </div>

                <!-- AI Materials Section -->
                <div id="ai-materials-section" class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color mt-6">
                    <h3 class="text-xl font-bold text-primary mb-4">AI-Generated Materials</h3>
                    <div id="ai-materials-list" class="space-y-4">
                        <p id="empty-ai-materials-message" class="text-secondary text-center">No AI-generated materials yet. Go to 'AI Learning' to create some!</p>
                    </div>
                </div>
            </div>

            <!-- AI Learning View -->
            <div id="view-ai-learning" class="hidden space-y-8">
                <div>
                    <h2 class="text-3xl font-bold text-primary">AI Learning Studio</h2>
                    <p class="text-secondary mt-1">Generate notes, quizzes, keywords, and exam questions using AI based on your custom input.</p>
                </div>

                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color space-y-4">
                    <h3 class="text-xl font-bold text-primary mb-4">Content Input</h3>
                    <div class="flex items-center space-x-2 mb-2">
                        <input type="checkbox" id="ai-input-mode-toggle" class="form-checkbox h-4 w-4 text-accent-blue rounded">
                        <label for="ai-input-mode-toggle" class="text-primary text-sm font-semibold">Generate from Topic Name</label>
                    </div>
                    <label for="ai-input-content" class="block text-primary text-sm font-semibold mb-2" id="ai-input-content-label">Provide text, a topic, or questions for the AI to process.</label>
                    <textarea id="ai-input-content" class="w-full h-40 p-3 border border-border-color rounded-lg text-primary" placeholder="Enter text, a topic, or specific questions here... e.g., 'Explain blockchain technology', 'Summarize World War 2 causes', or 'Quiz me on React hooks'." rows="6"></textarea>

                    <div>
                        <label for="ai-content-subject-select" class="block text-primary text-sm font-semibold mb-2">Assign to Subject (Optional for categorization, required for Flashcards):</label>
                        <select id="ai-content-subject-select" class="w-full p-3 border border-border-color rounded-lg bg-input-bg text-input-text">
                            <option value="">Select or Add New Subject</option>
                        </select>
                        <input type="text" id="ai-content-new-subject-input" class="w-full mt-2 p-3 border border-border-color rounded-lg text-primary hidden" placeholder="New Subject Name">
                        <button id="toggle-ai-content-new-subject-input" class="text-accent-blue text-sm mt-2 hover:underline">Add New Subject</button>
                    </div>

                    <div class="flex flex-wrap gap-3 mt-6 justify-center sm:justify-start">
                        <button id="generate-ai-notes-btn" class="bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            Generate AI Notes
                        </button>
                        <button id="generate-notes-flashcards-btn" class="bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            Generate Flashcards
                        </button>
                        <button id="generate-quiz-btn" class="bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            Generate Quiz
                        </button>
                        <button id="extract-keywords-btn" class="bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            Extract Keywords
                        </button>
                        <button id="predict-exam-questions-btn" class="bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            Predict Exam Questions
                        </button>
                        <button id="summarize-content-btn" class="bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            Summarize Content
                        </button>
                    </div>
                    <p id="ai-generation-status" class="text-secondary text-sm mt-4 text-center hidden">Processing AI...</p>
                </div>

                <div id="ai-generated-output" class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color hidden">
                    <h3 class="text-xl font-bold text-primary mb-4" id="ai-output-title">Generated Content</h3>
                    <div id="ai-output-content-display" class="space-y-4 text-secondary formatted-ai-content">
                        <!-- AI generated content will be displayed here -->
                    </div>
                </div>
            </div>

            <!-- Mind Map View (New) -->
            <div id="view-mind-map" class="hidden space-y-6">
                <div>
                    <h2 class="text-3xl font-bold text-primary">Mind Map</h2>
                    <p class="text-secondary mt-1">Visualize and connect your concepts. Click to add nodes, drag to move, click to connect.</p>
                </div>
                <div class="bg-secondary p-4 rounded-xl shadow-sm border border-border-color flex flex-col items-stretch">
                    <div class="flex flex-wrap gap-2 mb-4">
                        <button id="mind-map-add-node-btn" class="bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            Add Node
                        </button>
                        <button id="mind-map-clear-all-btn" class="bg-red-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-red-600 transition-all shadow-md">
                            Clear All
                        </button>
                        <input type="text" id="mind-map-node-text-input" placeholder="Node Text (click to add)" class="flex-grow p-2 border border-border-color rounded-lg text-primary max-w-xs">
                        <button id="mind-map-save-btn" class="bg-green-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-600 transition-all shadow-md">
                            Save Map
                        </button>
                        <select id="mind-map-load-select" class="p-2 border border-border-color rounded-lg bg-input-bg text-input-text max-w-[150px]">
                            <option value="">Load Map</option>
                        </select>
                    </div>
                    <canvas id="mind-map-canvas" class="bg-gray-100 rounded-lg border border-border-color w-full h-[600px] cursor-grab"></canvas>
                    <p class="text-sm text-secondary mt-2">Hint: Double-click a node to edit text. Click once on a node to select, click another to connect. Drag nodes to move them.</p>
                </div>
            </div>

            <!-- Glossary View (New) -->
            <div id="view-glossary" class="hidden space-y-6">
                <div>
                    <h2 class="text-3xl font-bold text-primary">Glossary</h2>
                    <p class="text-secondary mt-1">Your personal dictionary of key terms and definitions, extracted from your learning materials.</p>
                </div>
                <div id="glossary-content" class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                    <input type="text" id="glossary-search-input" placeholder="Search glossary..." class="w-full p-2 border border-border-color rounded-lg mb-4 bg-input-bg text-input-text">
                    <div id="glossary-list" class="space-y-3">
                        <p id="empty-glossary-message" class="text-secondary text-center">Your glossary is currently empty. Use the AI Learning Studio to "Extract Keywords" from your notes!</p>
                    </div>
                </div>
            </div>

            <!-- Analytics View -->
            <div id="view-analytics" class="hidden space-y-8">
                 <div>
                    <h2 class="text-3xl font-bold text-primary">Learning Analytics</h2>
                    <p class="text-secondary mt-1">Visualize your progress, identify trends, and gain deep insights into your study habits and knowledge retention.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                        <h3 class="font-semibold text-primary">Mastery Breakdown</h3>
                        <div class="chart-container mt-4"><canvas id="masteryChart"></canvas></div>
                        <p class="text-secondary text-sm mt-3">Distribution of your knowledge atoms by their current mastery level.</p>
                    </div>
                    <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                        <h3 class="font-semibold text-primary">Study Activity (Last 7 Days)</h3>
                        <div class="chart-container mt-4"><canvas id="activityChart"></canvas></div>
                        <p class="text-secondary text-sm mt-3">Hours spent on active learning, broken down by day.</p>
                    </div>
                </div>
                 <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                    <h3 class="font-semibold text-primary">Knowledge Growth Over Time</h3>
                     <div class="chart-container mt-4"><canvas id="growthChart"></canvas></div>
                     <p class="text-secondary text-sm mt-3">Cumulative total of knowledge atoms you've mastered over the past six months.</p>
                </div>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-primary">Learning Goals</h3>
                        <button id="add-goal-btn" class="bg-accent-blue text-white text-sm font-semibold py-1.5 px-3 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            + Add Goal
                        </button>
                    </div>
                    <div id="goals-list" class="space-y-4">
                        <p id="empty-goals-message" class="text-secondary text-center hidden">No goals set yet. Click "Add Goal" to create your first objective!</p>
                    </div>
                </div>
            </div>

            <!-- Achievements View -->
            <div id="view-achievements" class="hidden space-y-6">
                <div>
                    <h2 class="text-3xl font-bold text-primary">Achievements</h2>
                    <p class="text-secondary mt-1">Celebrate your progress and unlock badges as you master new skills!</p>
                </div>
                <div id="achievements-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <p id="empty-achievements-message" class="text-secondary text-center col-span-full">No achievements unlocked yet. Keep learning!</p>
                </div>
            </div>

            <!-- Study View (Flashcards) -->
            <div id="view-study" class="hidden">
                 <div class="max-w-3xl mx-auto text-center">
                    <h2 class="text-2xl font-bold text-primary">Study Session</h2>
                    <p class="text-secondary text-sm">AI-Powered Quizzes & Flashcards</p>
                    <p id="study-progress-text" class="text-secondary mt-1">Atom 1 of 15</p>
                    <div class="w-full bg-border-color rounded-full h-2.5 mt-4">
                        <div id="study-progress-bar" class="bg-accent-blue h-2.5 rounded-full" style="width: 7%"></div>
                    </div>
                </div>
                <div class="mt-8 perspective-1000">
                    <div id="flashcard-container" class="flip-card relative w-full max-w-2xl mx-auto h-80">
                        <div id="flashcard-front" class="flip-card-front absolute w-full h-full p-8 rounded-2xl shadow-lg border border-border-color flex flex-col justify-center items-center text-center">
                            <p class="text-xs text-secondary mb-2" id="card-subject-front"></p>
                            <p class="text-xl md:text-2xl font-medium text-primary" id="card-question"></p>
                            <button id="show-answer-btn" class="absolute bottom-6 bg-primary text-white font-semibold py-2 px-6 rounded-lg hover:bg-slate-900 transition-all">Show Answer</button>
                        </div>
                        <div id="flashcard-back" class="flip-card-back absolute w-full h-full p-8 rounded-2xl shadow-lg border border-border-color flex flex-col justify-center items-center text-center">
                            <p class="text-xs text-secondary mb-2" id="card-subject-back"></p>
                            <p class="text-lg font-medium mb-6 text-primary" id="card-answer"></p>
                            <div class="absolute bottom-6 w-full px-6">
                                <p class="text-sm text-secondary mb-3">How well did you recall this?</p>
                                <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                                    <button data-rating="0" class="recall-btn bg-red-100 text-red-700 hover:bg-red-200 p-3 rounded-lg font-semibold transition-all">Forgot</button>
                                    <button data-rating="1" class="recall-btn bg-orange-100 text-orange-700 hover:bg-orange-200 p-3 rounded-lg font-semibold transition-all">Struggled</button>
                                    <button data-rating="2" class="recall-btn bg-yellow-100 text-yellow-700 hover:bg-yellow-200 p-3 rounded-lg font-semibold transition-all">Good</button>
                                    <button data-rating="3" class="recall-btn bg-green-100 text-green-700 hover:bg-green-200 p-3 rounded-lg font-semibold transition-all">Perfect</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Focus Tools View -->
            <div id="view-focus" class="hidden space-y-8">
                <div>
                    <h2 class="text-3xl font-bold text-primary">Focus Tools</h2>
                    <p class="text-secondary mt-1">Optimize your environment for deep concentration and effective learning sessions.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                        <h3 class="font-semibold text-primary mb-4">Smart Focus Timer (Pomodoro)</h3>
                        <div class="text-center">
                            <p id="pomodoro-timer" class="text-6xl font-bold text-primary">25:00</p>
                            <p id="pomodoro-status" class="text-secondary mt-2">Time to focus!</p>
                            <div class="flex justify-center gap-4 mt-6">
                                <button id="pomodoro-start" class="bg-accent-blue text-white font-semibold py-2 px-6 rounded-lg hover:bg-accent-blue-hover transition-all">Start</button>
                                <button id="pomodoro-pause" class="bg-border-color text-primary font-semibold py-2 px-6 rounded-lg hover:bg-slate-300 transition-all">Pause</button>
                                <button id="pomodoro-reset" class="bg-red-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-red-600 transition-all">Reset</button>
                            </div>
                        </div>
                    </div>
                    <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                        <h3 class="font-semibold text-primary mb-4">Ambient Soundscapes</h3>
                        <div id="soundscapes" class="grid grid-cols-2 gap-4"></div>
                    </div>
                </div>
            </div>

            <!-- Learning Hub View -->
            <div id="view-learning-hub" class="hidden space-y-6">
                <div>
                    <h2 class="text-3xl font-bold text-primary">Learning Hub</h2>
                    <p class="text-secondary mt-1">Explore science-backed study techniques, memorization strategies, and understand common cognitive biases to supercharge your learning process.</p>
                </div>
                <div class="flex space-x-4 border-b border-border-color pb-2 overflow-x-auto whitespace-nowrap">
                    <button data-category="auralearnBasics" class="tab-button text-primary font-semibold py-2 px-4 rounded-t-lg hover:bg-border-color">AuraLearn Basics</button>
                    <button data-category="techniques" class="tab-button text-primary font-semibold py-2 px-4 rounded-t-lg bg-accent-blue text-white">Study Techniques</button>
                    <button data-category="memorization" class="tab-button text-primary font-semibold py-2 px-4 rounded-t-lg hover:bg-border-color">Memorization</button>
                    <button data-category="biases" class="tab-button text-primary font-semibold py-2 px-4 rounded-t-lg hover:bg-border-color">Cognitive Biases</button>
                    <button data-category="productivity" class="tab-button text-primary font-semibold py-2 px-4 rounded-t-lg hover:bg-border-color">Productivity & Habits</button>
                    <button data-category="examPrep" class="tab-button text-primary font-semibold py-2 px-4 rounded-t-lg hover:bg-border-color">Exam Prep</button>
                    <button data-category="advanced" class="tab-button text-primary font-semibold py-2 px-4 rounded-t-lg hover:bg-border-color">Advanced Strategies</button>
                </div>
                <div id="learning-hub-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </div>

            <!-- Settings View -->
            <div id="view-settings" class="hidden space-y-6">
                <div>
                    <h2 class="text-3xl font-bold text-primary">Settings</h2>
                    <p class="text-secondary mt-1">Personalize your AuraLearn experience.</p>
                </div>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color space-y-4">
                    <h3 class="text-xl font-bold text-primary">User Profile</h3>
                    <div class="flex items-center gap-4">
                        <label for="username-input" class="text-primary font-semibold">Username:</label>
                        <input type="text" id="username-input" class="flex-grow p-3 border border-border-color rounded-lg" value="User">
                        <button id="save-username-btn" class="bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-blue-hover transition-all">Save</button>
                    </div>
                    <!-- Data Backup/Export/Import Section -->
                    <h3 class="text-xl font-bold text-primary mt-6">Data Management</h3>
                    <div class="flex gap-4">
                        <button id="export-data-btn" class="bg-green-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-600 transition-all">
                            Export Data
                        </button>
                        <input type="file" id="import-data-input" accept=".json" class="hidden">
                        <button id="import-data-btn" class="bg-purple-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-purple-600 transition-all">
                            Import Data
                        </button>
                    </div>
                </div>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color space-y-4">
                    <h3 class="text-xl font-bold text-primary">Themes</h3>
                    <p class="text-secondary">Choose your preferred visual theme for the app.</p>
                    <div class="flex gap-4">
                        <button data-theme="light" class="theme-btn border-2 border-accent-blue p-3 rounded-lg text-primary font-semibold hover:opacity-80 transition-opacity">Light</button>
                        <button data-theme="dark" class="theme-btn border-2 border-border-color p-3 rounded-lg text-primary font-semibold hover:opacity-80 transition-opacity">Dark</button>
                        <button data-theme="vibrant" class="theme-btn border-2 border-border-color p-3 rounded-lg text-primary font-semibold hover:opacity-80 transition-opacity">Vibrant</button>
                    </div>
                </div>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color space-y-4">
                    <h3 class="text-xl font-bold text-primary">Spaced Repetition Intervals (Days)</h3>
                    <p class="text-secondary">Customize how often atoms are reviewed based on recall.</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="interval-perfect" class="block text-primary text-sm font-semibold mb-2">Perfect Recall:</label>
                            <input type="number" id="interval-perfect" class="w-full p-3 border border-border-color rounded-lg" value="7">
                        </div>
                        <div>
                            <label for="interval-good" class="block text-primary text-sm font-semibold mb-2">Good Recall:</label>
                            <input type="number" id="interval-good" class="w-full p-3 border border-border-color rounded-lg" value="3">
                        </div>
                        <div>
                            <label for="interval-struggled" class="block text-primary text-sm font-semibold mb-2">Struggled Recall:</label>
                            <input type="number" id="interval-struggled" class="w-full p-3 border border-border-color rounded-lg" value="1">
                        </div>
                        <div>
                            <label for="interval-forgot" class="block text-primary text-sm font-semibold mb-2">Forgot Recall (Hours for first review, then days):</label>
                            <input type="number" id="interval-forgot" class="w-full p-3 border border-border-color rounded-lg" value="0.25">
                        </div>
                    </div>
                    <button id="save-intervals-btn" class="mt-4 w-full bg-accent-blue text-white font-semibold py-2 rounded-lg hover:bg-accent-blue-hover transition-all">Save Intervals</button>
                </div>
            </div>

            <!-- Tutorial View -->
            <div id="view-tutorial" class="hidden space-y-6">
                <div>
                    <h2 class="text-3xl font-bold text-primary">AuraLearn Tutorial</h2>
                    <p class="text-secondary mt-1">Learn how to make the most of AuraLearn's features with these guided tours and explanations.</p>
                </div>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                    <h3 class="text-xl font-bold text-primary mb-4">Quick Tours</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button data-tour="dashboard" class="tutorial-tour-btn bg-accent-blue text-white font-semibold py-3 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            Dashboard Tour
                        </button>
                        <button data-tour="library" class="tutorial-tour-btn bg-accent-blue text-white font-semibold py-3 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            Library & Flashcards Tour
                        </button>
                        <button data-tour="ai-learning" class="tutorial-tour-btn bg-accent-blue text-white font-semibold py-3 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            AI Learning Studio Tour
                        </button>
                        <button data-tour="focus-tools" class="tutorial-tour-btn bg-accent-blue text-white font-semibold py-3 px-4 rounded-lg hover:bg-accent-blue-hover transition-all shadow-md">
                            Focus Tools Tour
                        </button>
                    </div>
                </div>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-border-color">
                    <h3 class="text-xl font-bold text-primary mb-4">Detailed Guides</h3>
                    <ul class="space-y-3">
                        <li class="p-3 rounded-lg border list-item-themed hover:list-item-themed cursor-pointer" data-guide="srs-deep-dive">
                            <h4 class="font-semibold text-primary">Deep Dive: Spaced Repetition</h4>
                            <p class="text-sm text-secondary">Understand the science and how AuraLearn's SRS works.</p>
                        </li>
                        <li class="p-3 rounded-lg border list-item-themed hover:list-item-themed cursor-pointer" data-guide="customizing-ai">
                            <h4 class="font-semibold text-primary">Customizing AI Generation</h4>
                            <p class="text-sm text-secondary">Tips for getting the best results from AI Learning Studio.</p>
                        </li>
                        <li class="p-3 rounded-lg border list-item-themed hover:list-item-themed cursor-pointer" data-guide="goal-setting">
                            <h4 class="font-semibold text-primary">Effective Goal Setting</h4>
                            <p class="text-sm text-secondary">Strategies for creating and achieving your learning goals.</p>
                        </li>
                        <li class="p-3 rounded-lg border list-item-themed hover:list-item-themed cursor-pointer" data-guide="data-management">
                            <h4 class="font-semibold text-primary">Data Backup & Import</h4>
                            <p class="text-sm text-secondary">How to export and import your learning data.</p>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Modals (kept at the end for z-index and overlay) -->

            <!-- Detail Modal (for Learning Hub, Recommended Atoms, AI Material Display) -->
            <div id="detail-modal" class="fixed inset-0 hidden modal z-50">
                <div class="bg-secondary p-8 rounded-xl shadow-2xl border border-border-color w-full max-w-2xl mx-auto overflow-y-auto max-h-[90vh]">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-primary" id="detail-title"></h3>
                        <button id="close-detail-modal" class="text-secondary text-2xl hover:text-primary">&times;</button>
                    </div>
                    <div class="space-y-4 text-secondary" id="detail-content">
                         <div id="detail-content-text" class="formatted-ai-content"></div>
                         <p id="detail-loading" class="text-center text-accent-blue hidden">Generating detailed explanation...</p>
                    </div>
                </div>
            </div>

            <!-- Subject Detail Modal (for Library Subject clicks) -->
            <div id="subject-detail-modal" class="fixed inset-0 hidden modal z-50">
                <div class="bg-secondary p-8 rounded-xl shadow-2xl border border-border-color w-full max-w-2xl mx-auto overflow-y-auto max-h-[90vh]">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-primary" id="subject-detail-title"></h3>
                        <button id="close-subject-detail-modal" class="text-secondary text-2xl hover:text-primary">&times;</button>
                    </div>
                    <div id="subject-atoms-list" class="space-y-4 text-secondary">
                        <!-- List of atoms for the subject will go here -->
                    </div>
                </div>
            </div>

            <!-- Onboarding Modal (initial app setup) -->
            <div id="onboarding-modal" class="fixed inset-0 modal z-50">
                <div class="bg-secondary p-8 rounded-xl shadow-2xl border border-border-color w-full max-w-lg mx-auto text-center">
                    <h3 class="text-3xl font-bold text-primary mb-4">Welcome to AuraLearn!</h3>
                    <p class="text-secondary mb-6" id="onboarding-text">Let's set up your personalized learning journey. This quick tour will help AuraLearn understand your goals.</p>
                    <div id="onboarding-steps" class="space-y-4">
                        <div id="step-1">
                            <h4 class="font-semibold text-primary mb-2">What are your primary learning goals?</h4>
                            <textarea id="goal-input" class="w-full h-24 p-3 border border-border-color rounded-lg text-primary" placeholder="E.g., Pass my calculus exam, Learn web development basics, Understand cognitive psychology deeply..."></textarea>
                        </div>
                        <div id="step-2" class="hidden">
                            <h4 class="font-semibold text-primary mb-2">How much time can you dedicate to learning per week?</h4>
                            <input type="number" id="time-input" class="w-full p-3 border border-border-color rounded-lg text-primary" placeholder="Hours per week">
                        </div>
                        <div id="step-3" class="hidden">
                            <h4 class="font-semibold text-primary mb-2">What subjects are you currently focusing on?</h4>
                            <input type="text" id="subjects-input" class="w-full p-3 border border-border-color rounded-lg text-primary" placeholder="Comma-separated, e.g., Math, Science, History">
                        </div>
                    </div>
                    <button id="onboarding-next-btn" class="mt-8 bg-accent-blue text-white font-semibold py-3 px-8 rounded-lg hover:bg-accent-blue-hover transition-all">Next</button>
                    <button id="onboarding-skip-btn" class="mt-4 text-secondary hover:text-primary transition-colors">Skip for now</button>
                </div>
            </div>

            <!-- Quick Add Atom Modal -->
            <div id="quick-add-atom-modal" class="fixed inset-0 hidden modal z-50">
                <div class="bg-secondary p-8 rounded-xl shadow-2xl border border-border-color w-full max-w-md mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-primary">Quick Add Learning Atom</h3>
                        <button id="close-quick-add-modal" class="text-secondary text-2xl hover:text-primary">&times;</button>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label for="quick-add-subject" class="block text-primary text-sm font-semibold mb-2">Subject:</label>
                            <select id="quick-add-subject" class="w-full p-3 border border-border-color rounded-lg bg-input-bg text-input-text">
                                <option value="">Select or Add New Subject</option>
                            </select>
                            <input type="text" id="new-subject-input" class="w-full mt-2 p-3 border border-border-color rounded-lg text-primary hidden" placeholder="New Subject Name">
                            <button id="toggle-new-subject-input" class="text-accent-blue text-sm mt-2 hover:underline">Add New Subject</button>
                        </div>
                        <div>
                            <label for="quick-add-question" class="block text-primary text-sm font-semibold mb-2">Question/Concept:</label>
                            <textarea id="quick-add-question" class="w-full h-24 p-3 border border-border-color rounded-lg text-primary" placeholder="What is the capital of France?"></textarea>
                        </div>
                        <div>
                            <label for="quick-add-answer" class="block text-primary text-sm font-semibold mb-2">Answer/Explanation:</label>
                            <textarea id="quick-add-answer" class="w-full h-24 p-3 border border-border-color rounded-lg text-primary" placeholder="Paris."></textarea>
                        </div>
                    </div>
                    <button id="add-atom-btn" class="mt-6 w-full bg-accent-blue text-white font-semibold py-3 rounded-lg hover:bg-accent-blue-hover transition-all">
                        Add Atom
                    </button>
                </div>
            </div>

            <!-- Add Goal Modal -->
            <div id="add-goal-modal" class="fixed inset-0 hidden modal z-50">
                <div class="bg-secondary p-8 rounded-xl shadow-2xl border border-border-color w-full max-w-md mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-primary">Add New Learning Goal</h3>
                        <button id="close-add-goal-modal" class="text-secondary text-2xl hover:text-primary">&times;</button>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label for="goal-name-input" class="block text-primary text-sm font-semibold mb-2">Goal Name:</label>
                            <input type="text" id="goal-name-input" class="w-full p-3 border border-border-color rounded-lg text-primary" placeholder="e.g., Master JavaScript Basics">
                        </div>
                        <div>
                            <label for="goal-target-type" class="block text-primary text-sm font-semibold mb-2">Target Type:</label>
                            <select id="goal-target-type" class="w-full p-3 border border-border-color rounded-lg bg-input-bg text-input-text">
                                <option value="atoms">Master X Atoms</option>
                                <option value="time">Study X Hours</option>
                            </select>
                        </div>
                        <div>
                            <label for="goal-target-value" class="block text-primary text-sm font-semibold mb-2">Target Value:</label>
                            <input type="number" id="goal-target-value" class="w-full p-3 border border-border-color rounded-lg text-primary" placeholder="e.g., 50 or 20">
                        </div>
                        <div>
                            <label for="goal-end-date" class="block text-primary text-sm font-semibold mb-2">End Date:</label>
                            <input type="date" id="goal-end-date" class="w-full p-3 border border-border-color rounded-lg text-primary">
                        </div>
                    </div>
                    <button id="create-goal-btn" class="mt-6 w-full bg-accent-blue text-white font-semibold py-3 rounded-lg hover:bg-accent-blue-hover transition-all">
                        Create Goal
                    </button>
                </div>
            </div>

            <!-- Add/Edit Event Modal (New) -->
            <div id="add-edit-event-modal" class="fixed inset-0 hidden modal z-50">
                <div class="bg-secondary p-8 rounded-xl shadow-2xl border border-border-color w-full max-w-md mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-primary" id="event-modal-title">Add New Event</h3>
                        <button id="close-event-modal" class="text-secondary text-2xl hover:text-primary">&times;</button>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label for="event-title-input" class="block text-primary text-sm font-semibold mb-2">Event Title:</label>
                            <input type="text" id="event-title-input" class="w-full p-3 border border-border-color rounded-lg text-primary" placeholder="e.g., Math Homework Due">
                        </div>
                        <div>
                            <label for="event-date-input" class="block text-primary text-sm font-semibold mb-2">Date:</label>
                            <input type="date" id="event-date-input" class="w-full p-3 border border-border-color rounded-lg text-primary">
                        </div>
                        <div>
                            <label for="event-time-input" class="block text-primary text-sm font-semibold mb-2">Time (Optional):</label>
                            <input type="time" id="event-time-input" class="w-full p-3 border border-border-color rounded-lg text-primary">
                        </div>
                        <div>
                            <label for="event-notes-input" class="block text-primary text-sm font-semibold mb-2">Notes (Optional):</label>
                            <textarea id="event-notes-input" class="w-full h-24 p-3 border border-border-color rounded-lg text-primary" placeholder="Any extra details..."></textarea>
                        </div>
                        <div>
                            <label for="event-type-select" class="block text-primary text-sm font-semibold mb-2">Type:</label>
                            <select id="event-type-select" class="w-full p-3 border border-border-color rounded-lg bg-input-bg text-input-text">
                                <option value="assignment">Assignment</option>
                                <option value="exam">Exam</option>
                                <option value="study">Study Session</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex justify-end gap-3 mt-6">
                        <button id="delete-event-btn" class="bg-red-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-red-600 transition-all hidden">Delete</button>
                        <button id="save-event-btn" class="bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-blue-hover transition-all">Save Event</button>
                    </div>
                </div>
            </div>


            <!-- Reflection Modal -->
            <div id="reflection-modal" class="fixed inset-0 hidden modal z-50">
                <div class="bg-secondary p-8 rounded-xl shadow-2xl border border-border-color w-full max-w-md mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-primary">Reflect on Your Session</h3>
                        <button id="close-reflection-modal" class="text-secondary text-2xl hover:text-primary">&times;</button>
                    </div>
                    <p class="text-secondary mb-4">What was most challenging or insightful in this study session?</p>
                    <textarea id="reflection-text" class="w-full h-32 p-3 border border-border-color rounded-lg text-primary" placeholder="Type your thoughts here..."></textarea>
                    <button id="save-reflection-btn" class="mt-6 w-full bg-accent-blue text-white font-semibold py-3 rounded-lg hover:bg-accent-blue-hover transition-all">
                        Save Reflection
                    </button>
                </div>
            </div>

            <!-- Global Search Results Modal -->
            <div id="search-results-modal" class="fixed inset-0 hidden modal z-50">
                <div class="bg-secondary p-8 rounded-xl shadow-2xl border border-border-color w-full max-w-2xl mx-auto overflow-y-auto max-h-[90vh]">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-primary">Search Results</h3>
                        <button id="close-search-results-modal" class="text-secondary text-2xl hover:text-primary">&times;</button>
                    </div>
                    <div id="search-results-content" class="space-y-4 text-secondary">
                        <!-- Search results will be dynamically inserted here -->
                    </div>
                </div>
            </div>

            <!-- Quiz Modal -->
            <div id="quiz-modal" class="fixed inset-0 hidden modal z-50">
                <div class="bg-secondary p-8 rounded-xl shadow-2xl border border-border-color w-full max-w-3xl mx-auto overflow-y-auto max-h-[90vh]">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-primary" id="quiz-title">Quiz Title</h3>
                        <button id="close-quiz-modal" class="text-secondary text-2xl hover:text-primary">&times;</button>
                    </div>
                    <div id="quiz-content" class="space-y-4 text-secondary">
                        <div id="quiz-question-container" class="mb-6">
                            <p class="text-lg font-semibold text-primary mb-4" id="quiz-question-text"></p>
                            <div id="quiz-options" class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                <!-- Options will be inserted here -->
                            </div>
                            <button id="quiz-submit-answer-btn" class="mt-6 w-full bg-accent-blue text-white font-semibold py-3 rounded-lg hover:bg-accent-blue-hover transition-all">
                                Submit Answer
                            </button>
                            <p id="quiz-feedback" class="mt-4 text-center font-semibold hidden"></p>
                        </div>
                        <div id="quiz-results-container" class="hidden text-center">
                            <h3 class="text-2xl font-bold text-primary mb-4">Quiz Complete!</h3>
                            <p class="text-xl font-bold text-primary mb-4" id="quiz-score-display"></p>
                            <button id="quiz-retake-btn" class="bg-accent-blue text-white font-semibold py-2 px-6 rounded-lg hover:bg-accent-blue-hover transition-all">Retake Quiz</button>
                            <button id="quiz-review-answers-btn" class="ml-4 bg-border-color text-primary font-semibold py-2 px-6 rounded-lg hover:bg-slate-300 transition-all">Review Answers</button>
                        </div>
                        <div id="quiz-review-detail-container" class="hidden">
                            <h4 class="text-xl font-bold text-primary mb-4">Review Your Answers</h4>
                            <div id="quiz-review-list" class="space-y-4">
                                <!-- Reviewed questions will be inserted here -->
                            </div>
                            <button id="quiz-back-to-results-btn" class="mt-6 bg-border-color text-primary font-semibold py-2 px-6 rounded-lg hover:bg-slate-300 transition-all">Back to Results</button>
                        </div>
                    </div>
                </div>
            </div>

             <!-- Tutorial Step Modal -->
            <div id="tutorial-step-modal" class="fixed inset-0 hidden modal z-50">
                <div class="bg-secondary p-8 rounded-xl shadow-2xl border border-border-color w-full max-w-lg mx-auto overflow-y-auto max-h-[90vh]">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-primary" id="tutorial-step-title"></h3>
                        <button id="close-tutorial-step-modal" class="text-secondary text-2xl hover:text-primary">&times;</button>
                    </div>
                    <div id="tutorial-step-content" class="space-y-4 text-secondary">
                        <!-- Tutorial content will be displayed here -->
                    </div>
                    <div class="flex justify-between mt-8">
                        <button id="tutorial-prev-btn" class="bg-border-color text-primary font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 transition-all hidden">Previous</button>
                        <button id="tutorial-next-btn" class="bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-blue-hover transition-all">Next</button>
                        <button id="tutorial-finish-btn" class="bg-green-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-600 transition-all hidden">Finish Tutorial</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Notification Toast Element -->
    <div id="notification-toast" class="hidden"></div>

    <!-- Link to your JavaScript file -->
    <script src="script.js" defer></script>
</body>
</html>
